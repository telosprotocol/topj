package org.topnetwork.core;

import com.alibaba.fastjson.JSON;
import org.junit.Before;
import org.junit.Test;
import org.topnetwork.account.Account;
import org.topnetwork.methods.response.AccountInfoResponse;
import org.topnetwork.methods.response.ResponseBase;
import org.topnetwork.methods.response.reward.VoterDividendResponse;
import org.topnetwork.methods.response.tx.XTransactionResponse;
import org.topnetwork.procotol.http.HttpService;
import org.topnetwork.tx.PollingTransactionReceiptProcessor;

import java.io.IOException;
import java.math.BigInteger;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;

public class voteTest {
    private Topj topj = null;
    private Account account = null;

    @Before
    public void setUp() throws IOException {
        HttpService httpService = new HttpService("http://142.93.30.153:19081");
        topj = Topj.build(httpService);
        topj.setTransactionReceiptProcessor(new PollingTransactionReceiptProcessor(30000, 30));
//        topj.setTransactionReceiptProcessor(new NoOpProcessor());
        account = topj.genAccount("R9Pd5vh/dyI3IkKQrUsYFVq8t2L44JWWf4PW+RwwgQE=");
//        account = topj.genAccount();
        topj.passport(account);
//        TestCommon.createAccount(topj, account);

    }

    @Test
    public void stakingCheck(){
        String txStr = "vote|1610327101|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253df99010000000000;vote|1610519101|0c000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852ce6b140000000000280000005430303030304c687351386e74693645756732464b5135577a656f7371367139524448456636705ab2d6b10000000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344bc0c62d0000000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872533e311d0000000000280000005430303030304c51703350696f6f764877446a64666d775350456a757037617a524a364a36327338ce6b140000000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f384d14270000000000280000005430303030304c5932676d324170644e51546e457553646e714a526e367a4739675079707470584a31a8060000000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d9e4c0f0000000000280000005430303030304c5a74694d39346259426d69433532363159364d6e6767514e546a79724662364a6180841e0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036427f841e0000000000280000005430303030304c4c385856314c4155596451316d623666653355764476386a7744446b7a77477677002d310100000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b55763667785447358096980000000000;vote|1610673001|06000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344bc0cf6a0000000000280000005430303030304c5a74694d39346259426d69433532363159364d6e6767514e546a79724662364a6147b2bf0100000000280000005430303030304c50776a6e4c584a57394e6236635846563542746f5763385453624d33767272526f404b4c0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642e543df0700000000280000005430303030304c64593456434d5346737931696e4572576241653238477869646a4155456457726a00a3e11100000000280000005430303030304c644c43476b727633455463657357626e594e31627943746d46466550686a76624888ee190000000000;vote|1610759401|06000000280000005430303030304c656f4347647054346e59596552416f7a41345963544c724339466a686b6b5236556614120000000000280000005430303030304c673466344264437872594748643738467a55327a33506d656e6a446d43636d5471f831451b00000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872538249a50300000000280000005430303030304c4e684a7a454b5658644c48597667467662706d35434a746943543172443768725800b4c40400000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d404b4c0000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c357748336672435555737354685948f8f3302700000000;vote|1610845800|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364215f0170000000000;vote|1610932201|02000000280000005430303030304c555453344379766e5a325a624643706a526f553934587a4142597a636f56535752d488040000000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b3e311d0000000000;vote|1610932801|02000000280000005430303030304c555453344379766e5a325a624643706a526f553934587a4142597a636f56535752d488040000000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b3e311d0000000000;vote|1611018601|02000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872533e311d0000000000280000005430303030304c4b50416878454c506d54574d734636366759777a39533155764d66586468655337e0d14d0000000000;vote|1611105001|04000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872539a720e0000000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354dae6c540000000000280000005430303030304c63586467357357474770567065365239434252633534663779716971473955424c44e1820000000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b55763667785447350aecbb0000000000;vote|1611191401|02000000280000005430303030304c5932676d324170644e51546e457553646e714a526e367a4739675079707470584a4e691a0000000000280000005430303030304c63586467357357474770567065365239434252633534663779716971473955424c8484070000000000;vote|1611277801|01000000280000005430303030304c4c385856314c4155596451316d623666653355764476386a7744446b7a77477677e29de10000000000;vote|1611364201|05000000280000005430303030304c55454d654463635571557952555332744c74455142727468676b704b4c59385033594b0f0000000000280000005430303030304c546a346245375477767473754b33515a64714a47614136586a645544334e633161e0d3f00800000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253b5b1060000000000280000005430303030304c5a74694d39346259426d69433532363159364d6e6767514e546a79724662364a6100e1f50500000000280000005430303030304c4e6547526f3136326b61534d46536134425277546178694e684359485a59514b7260c4eb0b00000000;vote|1611796201|03000000280000005430303030304c4c3258576172586d374c64714a3331794177394e465341636e52544258534d4352d61c020000000000280000005430303030304c517253466f78617a784347346d364c74316164504a6351623252796579694e486193e1010500000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f388ff16b0000000000;vote|1611882601|02000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872536db2dd0100000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f38bf55290300000000;vote|1612228201|01000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b56583569a93d0000000000;vote|1613265001|01000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594835240f0000000000;vote|1613437800|02000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c29f650000000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b5576366778544735a0d1760000000000;vote|1613524201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364247b42e0000000000;vote|1613610601|03000000280000005430303030304c4e684a7a454b5658644c48597667467662706d35434a74694354317244376872587ad0490000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642da251d0000000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b5576366778544735ede4180000000000;vote|1613697001|01000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b55763667785447351a085e0000000000;vote|1613783401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642f3780e0000000000;vote|1613956201|02000000280000005430303030304c4e684a7a454b5658644c48597667467662706d35434a7469435431724437687258400d030000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364233487d0000000000;vote|1614042601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642b491080000000000;vote|1611969001|02000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253e0d14d0000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594825b5020000000000;vote|1612055401|03000000280000005430303030304c555453344379766e5a325a624643706a526f553934587a4142597a636f565357526e2c610000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364226d7010000000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b557636677854473518d3e10200000000;vote|1614301801|02000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f3800093d0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036428757870000000000;vote|1614302400|02000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f3800093d0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036428757870000000000;vote|1614561001|03000000280000005430303030304c66384a344d32514a3159514673556669316d31615a426a7575664e727471574336316bf50000000000280000005430303030304c5932676d324170644e51546e457553646e714a526e367a4739675079707470584a96990f0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036424895770000000000;vote|1614733801|03000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f386f92690000000000280000005430303030304c5a666b6d3335356a5277336b6a5045467963685a736b3435724c42326d7a646768626e330200000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364212085d0000000000;vote|1614838201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364252dc2c0000000000;vote|1615166400|01000000280000005430303030304c5a666b6d3335356a5277336b6a5045467963685a736b3435724c42326d7a646768068b010000000000;vote|1615252201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036424ecc170000000000;vote|1615338601|02000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a44384762760f4f0f0000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594884e06f0000000000;vote|1615425000|01000000280000005430303030304c63786954574e696d4644634d507855356b666d6b55636547695964624b77713566ae6c540000000000;vote|1615426800|01000000280000005430303030304c63786954574e696d4644634d507855356b666d6b55636547695964624b77713566ae6c540000000000;vote|1615511401|04000000280000005430303030304c55455078424c7859646664396a756d444c556942446f31744d65316d636332455028460f0000000000280000005430303030304c635869374a634c436e33647878414d65534642343446486f6f59413846774b775828460f0000000000280000005430303030304c4c483874387a6761424c6264705063445a316d39364764753461394543624e34776db2dd0100000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f7328460f0000000000;vote|1615684201|02000000280000005430303030304c4c483874387a6761424c6264705063445a316d39364764753461394543624e3477b7ab100000000000280000005430303030304c5932676d324170644e51546e457553646e714a526e367a4739675079707470584abd33100000000000;vote|1615770601|01000000280000005430303030304c62643743504e79484532785a46434336735669635677417863347a43474e50673814e8120000000000;vote|1615771201|01000000280000005430303030304c62643743504e79484532785a46434336735669635677417863347a43474e50673814e8120000000000;vote|1615857000|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364284e06f0000000000;vote|1615857601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364284e06f0000000000;vote|1616029801|01000000280000005430303030304c644c43476b727633455463657357626e594e31627943746d46466550686a766248d595060000000000;vote|1616030401|01000000280000005430303030304c644c43476b727633455463657357626e594e31627943746d46466550686a766248d595060000000000;vote|1616116201|02000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b77711e0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c3e90f0000000000;vote|1616202601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642a7b1120000000000;vote|1616375401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364283540c0000000000;vote|1616548200|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036422983170000000000;vote|1616634600|01000000280000005430303030304c4c385856314c4155596451316d623666653355764476386a7744446b7a77477677f9bc930000000000;vote|1616807400|01000000280000005430303030304c51703350696f6f764877446a64666d775350456a757037617a524a364a363273387cee100000000000;vote|1616893800|01000000280000005430303030304c646352664b734c457a67504153484b6f7a6265357339427479696132736651414b40420f0000000000;vote|1616980200|01000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c357748336672435555737354685948c791010000000000;vote|1617066600|01000000280000005430303030304c4c385856314c4155596451316d623666653355764476386a7744446b7a77477677e43a7b0000000000;vote|1617153001|03000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f73bca1010000000000280000005430303030304c646352664b734c457a67504153484b6f7a6265357339427479696132736651414b40420f0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036420ec7120000000000;vote|1618017001|02000000280000005430303030304c527747706279334863786a3347586a3332574e396a387367427764554c694e35686dbd0b0100000000280000005430303030304c6646355450655867336870596e6b59323563427837346b4b466a7071327a37465530ea0f0000000000;vote|1618103401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c99a1d0000000000;vote|1618189801|01000000280000005430303030304c527747706279334863786a3347586a3332574e396a387367427764554c694e3568f8e65e0000000000;vote|1618276201|02000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852ca03050000000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a44384762761f75290300000000;vote|1618362600|02000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852ec9a0c0000000000280000005430303030304c53704a517062674158314e5647395a3178666638446f37794c506542396269766d93e1010500000000;vote|1618621801|02000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a4438476276f3e2230000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036428c531e0000000000;vote|1618708200|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a4558528d90120000000000;vote|1618794601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642fc57060000000000;vote|1618812601|01000000280000005430303030304c5139454a71345870664b613379455131396477446d6f31776e4471355274396863e8e4230000000000;vote|1618967400|01000000280000005430303030304c63586467357357474770567065365239434252633534663779716971473955424cc99a1d0000000000;vote|1618968001|01000000280000005430303030304c63586467357357474770567065365239434252633534663779716971473955424cc99a1d0000000000;vote|1619140200|01000000280000005430303030304c4c3258576172586d374c64714a3331794177394e465341636e52544258534d435278b85b0000000000;vote|1619226600|02000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a45585256b60f0000000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b57550f0000000000;vote|1619313001|07000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852404b4c0000000000280000005430303030304c635869374a634c436e33647878414d65534642343446486f6f59413846774b775880841e0000000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f384081ba0100000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d80841e0000000000280000005430303030304c5a666b6d3335356a5277336b6a5045467963685a736b3435724c42326d7a646768404b4c0000000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b565835ee0c100000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642404b4c0000000000;vote|1619399401|01000000280000005430303030304c64593456434d5346737931696e4572576241653238477869646a4155456457726ada1b040000000000;vote|1619485800|03000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354dc0c62d0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364237534d0000000000280000005430303030304c4c3878783845665a3831585a683744506d6e4c69445172693332714b62473569347099140000000000;vote|1619572200|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d68486546316f9ba60000000000;vote|1619831401|01000000280000005430303030304c5139454a71345870664b613379455131396477446d6f31776e44713552743968639070130000000000;vote|1619917800|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d684865463150d9070000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642400d030000000000;vote|1620004200|02000000280000005430303030304c673466344264437872594748643738467a55327a33506d656e6a446d43636d5471712e180000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c357748336672435555737354685948ea56030000000000;vote|1620349801|03000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78758d90120000000000280000005430303030304c55455078424c7859646664396a756d444c556942446f31744d65316d6363324550c0c62d0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642f718010000000000;vote|1620436201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036428d71020000000000;vote|1620609001|03000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d684865463180841e0000000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875814f2e0000000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f7361c40f0000000000;vote|1621041000|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631a02e630000000000;vote|1621213801|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c787580841e0000000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f73814f2e0000000000;vote|1621300201|02000000280000005430303030304c6264613372555376326a6835564a6f7468394245624e377842356d6f466b653669400d030000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594836fe090000000000;vote|1621386600|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631982e020000000000;vote|1621473001|02000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a45585200093d0000000000280000005430303030304c55455078424c7859646664396a756d444c556942446f31744d65316d6363324550dbe41e0000000000;vote|1621645801|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852a02e630000000000;vote|1621646400|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852a02e630000000000;vote|1621991401|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875c91d0b0000000000280000005430303030304c53704a517062674158314e5647395a3178666638446f37794c506542396269766df1171e0100000000;vote|1622077801|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78757072340000000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636ab738120000000000;vote|1622337001|02000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636afe12300000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036427911020000000000;vote|1622509801|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d684865463199eb2e0000000000;vote|1622941801|02000000280000005430303030304c62386e6372505537476f766873426d7255724e69675a785869447675696e7938459005100000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036420794060000000000;vote|1623028200|01000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636a8b7d150000000000;vote|1623114601|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78750d35070000000000;vote|1623201001|02000000280000005430303030304c6646355450655867336870596e6b59323563427837346b4b466a7071327a374655ba601d0000000000280000005430303030304c62386e6372505537476f766873426d7255724e69675a785869447675696e793845d0ed2d0000000000;vote|1623287401|01000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636a40420f0000000000;vote|1623460201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364208ab060000000000;vote|1623460801|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364208ab060000000000;vote|1623546601|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631c0c62d0000000000;vote|1623633001|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c787501d23b0000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036429f86010000000000;vote|1623892201|03000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852b2b2040000000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c787500db1a0000000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b565835400d030000000000;vote|1623978601|02000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a45585240420f0000000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636aa2ba100000000000;vote|1624065001|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c787520a1070000000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b565835cb3f0c0000000000;vote|1624151401|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78752ba81e0000000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636aca430f0000000000;vote|1624237800|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875c684040000000000;vote|1624410600|01000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636a6d2c110000000000;vote|1624583401|01000000280000005430303030304c644c43476b727633455463657357626e594e31627943746d46466550686a766248e93b180000000000;vote|1624756201|01000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c357748336672435555737354685948a6a6000000000000;vote|1625015401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c3bb030000000000;vote|1625101801|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875aa04070000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642ba91010000000000;vote|1625188201|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c787508ab060000000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f737bb70f0000000000;vote|1625447401|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78750da8070000000000;vote|1625448000|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78750da8070000000000;vote|1625620200|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642a2c82d0100000000;vote|1625793001|01000000280000005430303030304c5139454a71345870664b613379455131396477446d6f31776e44713552743968638818310200000000;vote|1625879401|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78753278050000000000;vote|1625965801|01000000280000005430303030304c5139454a71345870664b613379455131396477446d6f31776e4471355274396863444b510200000000;vote|1626052200|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631e079af0000000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875365d030000000000;vote|1626138601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036421ccc180000000000;vote|1626230400|02000000280000005430303030304c4c483874387a6761424c6264705063445a316d39364764753461394543624e3477e734100000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c71f030000000000;vote|1626397800|01000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354de079af0000000000;vote|1626570601|01000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a443847627640420f0000000000;vote|1626657001|01000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354da7cd2d0000000000;vote|1626829801|01000000280000005430303030304c684b6963526a423141534b6d6f52333237664a4a3875375479436467345a315178a02c100000000000;vote|1627467781|02000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036420a1e030000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594877711e0000000000;vote|1627468801|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631e079af0000000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852a7cd2d0000000000;vote|1627693801|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875dc7c0c0000000000;vote|1628212201|02000000280000005430303030304c4b46313864704e357947754242706733385a517943387670647a7936595166506580841e0000000000280000005430303030304c517253466f78617a784347346d364c74316164504a6351623252796579694e486140420f0000000000;vote|1628471401|02000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a4438476276a7cd2d0000000000280000005430303030304c596762587079434e666b794164626870777931587671684e52453666444b38477a40420f0000000000;vote|1628557801|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a4558520b4d0f0000000000;vote|1628644201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036423536250000000000;vote|1628903400|01000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c78753536250000000000;vote|1629162601|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a4558529f86010000000000;vote|1629681000|03000000280000005430303030304c6254424a6f397458386b35506f377568456978337143357652625a694b4d43394b40420f0000000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b565835f07e0e0000000000280000005430303030304c6264613372555376326a6835564a6f7468394245624e377842356d6f466b65366940420f0000000000;abolish_vote|1610933401|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872533e311d0000000000;abolish_vote|1611019201|02000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b3e311d0000000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253e0d14d0000000000;abolish_vote|1611364801|02000000280000005430303030304c673466344264437872594748643738467a55327a33506d656e6a446d43636d5471e0d3f00800000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594860a5e11100000000;abolish_vote|1611883200|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a6171566858725360566c0000000000;abolish_vote|1611969600|01000000280000005430303030304c4b50416878454c506d54574d734636366759777a39533155764d66586468655337e0d14d0000000000;abolish_vote|1613611200|01000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594835240f0000000000;abolish_vote|1614561600|02000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253f11fa90000000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d404b4c0000000000;abolish_vote|1614734401|03000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253626e330200000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354dae6c540000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036426f92690000000000;abolish_vote|1615339201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364284e06f0000000000;abolish_vote|1615427401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642ae6c540000000000;abolish_vote|1615512000|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a617156685872536db2dd0100000000;abolish_vote|1615858200|01000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594884e06f0000000000;abolish_vote|1616635201|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036426c7b110000000000;abolish_vote|1616894401|02000000280000005430303030304c66384a344d32514a3159514673556669316d31615a426a7575664e72747157433686e4de0000000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f38bd64620000000000;abolish_vote|1617153601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642bca1010000000000;abolish_vote|1617671400|02000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f38fcfa2e0000000000280000005430303030304c61626a7874736d776668565737524b31657a555a4e554d644b55763667785447350aecbb0000000000;abolish_vote|1618276801|01000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f38cdbe620200000000;abolish_vote|1618363201|02000000280000005430303030304c517253466f78617a784347346d364c74316164504a6351623252796579694e486193e1010500000000280000005430303030304c5a666b6d3335356a5277336b6a5045467963685a736b3435724c42326d7a646768068b010000000000;abolish_vote|1618622400|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253f3e2230000000000;abolish_vote|1618968601|02000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f38a3f1090000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c99a1d0000000000;abolish_vote|1619140801|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364278b85b0000000000;abolish_vote|1619313600|01000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a4438476276ee78ec0200000000;abolish_vote|1619486400|01000000280000005430303030304c4c3258576172586d374c64714a3331794177394e465341636e52544258534d43523060420000000000;abolish_vote|1619572801|01000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f386f9ba60000000000;abolish_vote|1620350401|03000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a4558528d90120000000000280000005430303030304c646352664b734c457a67504153484b6f7a6265357339427479696132736651414b80841e0000000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354dc0c62d0000000000;abolish_vote|1620609600|01000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d80841e0000000000;abolish_vote|1621214401|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d684865463180841e0000000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875814f2e0000000000;abolish_vote|1621647001|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631a02e630000000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a4438476276feee0d0000000000;abolish_vote|1621732201|01000000280000005430303030304c63586467357357474770567065365239434252633534663779716971473955424c4058500000000000;abolish_vote|1622942401|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d68486546319005100000000000;abolish_vote|1623028801|01000000280000005430303030304c4c625a4d69576b4b5164674e624d7273664a327757326232617936616567636f3836d3060000000000;abolish_vote|1623201601|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631d0ed2d0000000000;abolish_vote|1623547201|01000000280000005430303030304c62386e6372505537476f766873426d7255724e69675a785869447675696e793845c0c62d0000000000;abolish_vote|1624669801|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364237534d0000000000;abolish_vote|1625016001|01000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253d213000000000000;abolish_vote|1625188800|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364208ab060000000000;abolish_vote|1625793601|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364284e2a10100000000;abolish_vote|1625966401|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a70364232acc80100000000;abolish_vote|1626398400|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631e079af0000000000;abolish_vote|1626657600|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631a7cd2d0000000000;abolish_vote|1626830401|01000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631a02c100000000000;abolish_vote|1627469401|02000000280000005430303030304c597174766837796647573135313632666f547072536a7a364c626236717a4c7875dc7c0c0000000000280000005430303030304c6654723472706a50776b4c73526a4e6a6d344d4345434c4a48724561625973354d8747dd0000000000;abolish_vote|1627953000|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642c26a190000000000;abolish_vote|1628125801|05000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631a037a00000000000280000005430303030304c4e547367517138734767586d4a534e4d7145707a6539626e716a725470626b344b57550f0000000000280000005430303030304c6264613372555376326a6835564a6f7468394245624e377842356d6f466b653669400d030000000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036424ecc170000000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c35774833667243555573735468594836fe090000000000;abolish_vote|1628212801|04000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d6848654631c0c62d0000000000280000005430303030304c57754166516f676b544e387479754b4a526f48424474736d615a61715668587253a086010000000000280000005430303030304c4c385856314c4155596451316d623666653355764476386a7744446b7a77477677c6d85c0100000000280000005430303030304c4c625566344d794b535a6d366e4d7146654c357748336672435555737354685948c791010000000000;abolish_vote|1628298601|01000000280000005430303030304c4d544762597361674a4b5136574737375a3774684b4d454577463143316561636a8b7d150000000000;abolish_vote|1628472001|01000000280000005430303030304c4d425135327657577131374c37564356565a6b774d44316d315734685a5a455852e70f3d0000000000;abolish_vote|1628558401|01000000280000005430303030304c504a54443365476b65444753524672667331707176613934694d687a326b5658350b4d0f0000000000;abolish_vote|1628644801|01000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a44384762763536250000000000;abolish_vote|1628904001|01000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a703642d4bc260000000000;abolish_vote|1629421801|06000000280000005430303030304c55455078424c7859646664396a756d444c556942446f31744d65316d636332455028460f0000000000280000005430303030304c635869374a634c436e33647878414d65534642343446486f6f59413846774b775828460f0000000000280000005430303030304c4c483874387a6761424c6264705063445a316d39364764753461394543624e3477b7ab100000000000280000005430303030304c6879714765557a55434171664462685447637535546f61526551793442514e6f7328460f0000000000280000005430303030304c5a666b6d3335356a5277336b6a5045467963685a736b3435724c42326d7a646768626e330200000000280000005430303030304c4b656258516643756a444b31314e68534a6636457032586b3571644a426a7036420a1e030000000000;abolish_vote|1629681601|02000000280000005430303030304c54317a583274337054644c51525373486b6e54385747646b526e734d684865463130c11d0000000000280000005430303030304c557377625467735470554362676e3444683179337365656e51774e4a443847627640420f0000000000";

    }

    @Test
    public void pledgeRedeemVoteTest() throws IOException {
        // pledge vote
//        TestCommon.getAccountInfo(topj, account);
//        ResponseBase<XTransactionResponse> result = topj.stakeVote(account, new BigInteger("10002"), new BigInteger("30"));
//        System.out.println("stake vote hash >> " + result.getData().getOriginalTxInfo().getTxHash() + " > is success > " + result.getData().isSuccess());
        TestCommon.getAccountInfo(topj, account);

        // redeem vote
//        ResponseBase<XTransactionResponse> redeemTokenVote = topj.unStakeVote(account, new BigInteger("1000"));
//        System.out.println("un stake vote hash >> " + redeemTokenVote.getData().getOriginalTxInfo().getTxHash() + " > is success > " + redeemTokenVote.getData().isSuccess());
//        TestCommon.getAccountInfo(topj, account);

        // set vote
//        Map<String, BigInteger> voteInfo = new HashMap<>();
//        String nodeAddress = "T-0-LaFmRAybSKTKjE8UXyf7at2Wcw8iodkoZ8";
//        voteInfo.put(nodeAddress, BigInteger.valueOf(5000));
//        ResponseBase<XTransactionResponse> setVoteResult = topj.voteNode(account, voteInfo);
//        System.out.println("set vote hash >> " + setVoteResult.getData().getOriginalTxInfo().getTxHash() + " >> is success > " + setVoteResult.getData().isSuccess());
//
//        TestCommon.getAccountInfo(topj, account);

        // cancel vote
//        voteInfo.put(nodeAddress, BigInteger.valueOf(200));
//        ResponseBase<XTransactionResponse> cancelVoteResult = topj.unVoteNode(account, voteInfo);
//        System.out.println("cancel vote hash >> " + cancelVoteResult.getData().getOriginalTxInfo().getTxHash() + " >> is success > " + setVoteResult.getData().isSuccess());
//
//        TestCommon.getAccountInfo(topj, account);

//        account.setAddress("T-0-LeP9oXqB8uLCBNCd9BsfULUYhSyDknt1q2");
//        ResponseBase<VoteUsedResponse> r = topj.listVoteUsed(account);
//        ResponseBase<VoteUsedResponse> r = topj.listVoteUsed(account, "T00000LKF18dpN5yGuBBpg38ZQyC8vpdzy6YQfPe");
//        System.out.println("list vote used > " + r.getData().getVoteInfos().get("T00000LKF18dpN5yGuBBpg38ZQyC8vpdzy6YQfPe"));

        Map<String, String> result = Topj.generateV3Args("T80000968927100f3cb7b23e8d477298311648978d8613", Arrays.asList("f8a49466ab344963eaa071f9636faac26b0d1a399003259466ab344963eaa071f9636faac26b0d1a3990032586010203040506830304058801020304050607088831323334353637388b68656c6c6f20776f726c648d746f7020756e69742074657374b8410051a134afd1fc323b4477d774a249742860c0d200f874ad6f3299c5270304e7f501423897a3d8e1613d339102af7f3011f901d85b0f848a27434a261563e259ee"));

        System.out.println("generateV3Args > " + JSON.toJSONString(result));
    }

    @Test
    public void testGetReward() throws IOException {
//        ResponseBase<String> nodeRewardResult = topj.getNodeReward(account);
//        System.out.println("node reward result > " + JSON.toJSONString(nodeRewardResult));

//        TestCommon.getAccountInfo(topj, account);
        ResponseBase<VoterDividendResponse> voterRewardResult = topj.queryVoterDividend(account, "T00000La8UTDgQQVRBjkCWEsKYk1XRpjZSK3zUbM");
        System.out.println("voter reward result > " + JSON.toJSONString(voterRewardResult));

        ResponseBase<AccountInfoResponse> accountInfoResponseBase = topj.getAccount(account);
        System.out.println("account address > " + accountInfoResponseBase.getData().getAccountAddr() + " balance > " + accountInfoResponseBase.getData().getBalance());

        ResponseBase<XTransactionResponse> claimRewardResult = topj.claimVoterDividend(account);
        System.out.println("node claim reward hash >> " + claimRewardResult.getData().getOriginalTxInfo().getTxHash() + " >> is success > " + claimRewardResult.getData().isSuccess());

        voterRewardResult = topj.queryVoterDividend(account, account.getAddress());
        System.out.println("voter reward result > " + JSON.toJSONString(voterRewardResult));

        accountInfoResponseBase = topj.getAccount(account);
        System.out.println("account address > " + accountInfoResponseBase.getData().getAccountAddr() + " balance > " + accountInfoResponseBase.getData().getBalance());
    }

    @Test
    public void testCancelVote() throws IOException {
        // cancel vote
        TestCommon.getAccountInfo(topj, account);
        Map<String, BigInteger> voteInfo = new HashMap<>();
        String nodeAddress = "T-0-LLdWiAhUMyiXq39pUbSSRUdjNN6gQHb9bm";
        voteInfo.put(nodeAddress, BigInteger.valueOf(150));
        ResponseBase<XTransactionResponse> cancelVoteResult = topj.unVoteNode(account, voteInfo);
        System.out.println("cancel vote hash >> " + cancelVoteResult.getData().getOriginalTxInfo().getTxHash());

        try {
            Thread.sleep(8000);
        } catch (InterruptedException eca) {
            eca.printStackTrace();
        }
        TestCommon.getAccountInfo(topj, account);
    }
}
